抽象类和接口
====

## 11.1 final关键字

**final在Java中并不常用，然而它却为我们提供了诸如在C语言中定义常量的功能，不仅如此，final还可以让你控制你的成员、方法或者是一个类是否可被覆写或继承等功能，这些特点使final在Java中拥有了一个不可或缺的地位，也是学习Java时必须要知道和掌握的关键字之一。**

### 11.1.1 final修饰的类

当你将final用于类身上时，你就需要仔细考虑，因为一个**final类是无法被继承的**，那也就意味着此类在一个继承树中是一个“叶子”类，并且此类的设计已被认为很完美而不需要进行修改或扩展。对于final类中的成员，你可以定义其为final，也可以不是final。而对于方法，由于所属类为final的关系，自然也就成了final型的。你也可以明确的给final类中的方法加上一个final，但这显然没有意义。

### 11.1.2 final修饰的方法

将方法声明为final，那就说明你已经知道这个方法提供的功能已经满足你要求，**不需要进行扩展**，并且也*不允许任何从此类继承的类来覆写*这个方法，但是继承仍然可以继承这个方法，也就是说可以直接使用，但不能重写。


### 11.1.3 final修饰的属性及常量的概念

​	当你在类中定义变量时，在其前面加上final关键字，那便是说，这个变量**一旦被初始化便不可改变**，这里不可改变的意思对基本类型来说是其值不可变，**而对于对象变量来说其引用不可再变**。其初始化可以在两个地方，一是其定义处，也就是说在final变量定义时直接给其赋值，二是在构造函数中。这两个地方只能选其一，要么在定义时给值，要么在构造函数中给值，不能同时既在定义时给了值，又在构造函数中给另外的值。

```java
public class Bat{
    final double pi=3.14;    //在定义时便给址值
    final int i;             //因为要在构造函数中进行初始化，所以此处便不可再给值
    final String str;        //此变量也与上面的一样
    Bat(){
        i=100;
        str="测试";
    }
    Bat(int ii,String s){
        i=ii;
        str=s;
    }
}
```

> 总结：final类与普通类的使用几乎没有差别，只是它失去了被继承的特性。

## 11.2 抽象类和抽象方法

***当多个类中出现相同功能，但是功能主体不同，这时可以进行向上抽取。只抽取功能定义，而不抽取功能主体。***

### 11.2.1抽象类

用abstract关键字修饰的类，我们称之为抽象类。

```java
public abstract class  Animal{
}
//其中 abstract 和权限修饰符的位置可以互换。
```

### 11.2.2 抽象方法

用abstract修饰，没有**方法体**的方法

```java
public abstract class  Animal{
  	public abstract void showInfo(String name);//抽象方法
  }
```

> 注意：
>
> abstract 关键字，和哪些关键字不能共存？？？。
>
> 1. final：被final修饰的类不能有子类。而被abstract修饰的类一定是一个父类。
> 2. private: 抽象类中的私有的抽象方法，不被子类所知，就无法被重写。而抽象方法的出现就是需要被重写。
> 3. static：如果static可以修饰抽象方法，那么连对象都省了，直接类名调用就可以了。可是抽象方法运行没意义。

总结：

* 抽象类必须使用abstract来修饰。
* 抽象方法一定在抽象类中。
* 不能直接使用new关键字来创建抽象类的对象（抽象类不能被实例化）。
* 抽象类和一般类没有太大的不同，只是比一般类多个了抽象函数。就是在类中可以定义抽象方法。
* 抽象类中可以不定义抽象方法，这样做仅仅是不让该类建立对象。
* 如果一个类中出现了抽象方法，则该类必须标记为抽象类。
* 子类继承抽象类时，父类中的抽象方法可以实现也可以不实现，如果抽象方法没有被实现，则子类也必须标记为抽象类。

## 11.3 接口

### 11.3.1 接口的概念

​	抽象类可以理解为是从多个类中抽象出来的模板，不但允许有抽象方法，**还可以有变量和普通方法**等。如果抽象的更彻底，只留下**常量**和**抽象方法**，则此时的抽象类有了新的名字：接口。

​	从本质上讲，接口是一种特殊的抽象类，这种抽象类中只包含共有的静态常量和共有的抽象方法的定义，而没有成员变量和方法的实现。

​	接口是抽象方法和静态常量的集合！

### 11.3.2 接口的使用

#### 11.3.2.1 接口的声明语法

接口声明语法：

```java
[public]  interface  接口名  [extends  父接口1, 父接口2] { 
	//零到多个常量定义…
	int MAX = 1; //定义变量，系统会自动添加public static final，把变量变成常量
	public static final int MAX1 = 1; //与上面定义的效果一样
	
	//零到多个抽象方法定义…
	void speak();  //声明抽象方法，可以省略 public 和abstract的修饰符
    public abstract void speak1(); //与上面效果一样
	String test( int a); //可以有返回值，也可以传递参数

 }
```

说明：

1. 权限修饰符，和class的权限修饰符相同，只有public和default两种。如果是default，则对同一包内其他类或接口可见。
2. interface 标示接口的关键字。
3. extends 后面跟接口列表，表示该接口继承的父接口。**接口只能继承接口，不能继承类**。多个父接口之间用`,`隔开。
4. 声明常量时可以像声明变量一样声明，但是系统会自动把该变量转成常量
5. 声明抽象方法。修饰符可以完全省略，系统会默认接口中的所有方法均是public abstract的，如果一定要添加修饰符，只能添加public和abstract

> 定义两个接口：门(功能：开\关)、锁(功能：上锁/解锁)。

#### 11.3.2.2 接口的实现类

由于接口只有抽象方法，所以接口与抽象类一样不能直接创建对象。我们一般说抽象类的子类，说接口的实现类。

一个类实现接口使用关键字implements。语法格式：

```java
[public][abstract] class 类名 implements 接口1, 接口2 …{
  }
```

> 定义一个实现类：防盗门类，并实现门接口，锁接口。并实现功能。

#### 11.3.2.3 接口的使用规则

1. 实现接口必须使用关键字implements。

2. 一个人可以具有多项能力，一个类可以实现多个接口，多个接口之间使用英文逗号隔开。

3. 类实现接口支持多实现。实现类**必须实现所有接口的所有抽象方法**，如果不能完全实现，则该类必须标记为抽象类。*这里的约定和抽象类是一样的*

4. 一个类实现多个接口的同时，还可以来继承一个类。继承类的时候写法是：

   必须**先写继承，再写实现**。

#### 11.3.2.4 接口的使用用途

1. 通过接口实现不相关类的相同行为，而无需考虑这些类之间的关系。
2. 通过接口指明多个类需要实现的方法
3. 通过接口了解对象的交互界面，而无需了解对象所对应的类
4. 使用接口，具体代码可以不依赖具体实现类，当具体实现类有变化时，代码不需调整。使用接口使软件更容易扩展。

面向对象的最高境界，是面向接口编程！！！



> 比较接口与抽象类
>
> ![](http://ojx4zwltq.bkt.clouddn.com/17-2-8/17841178-file_1486514515406_13b6b.png)





作业：

1. 定义一个接口，USBInterface。USB接口。再编写一个抽象方法 void service(); 该USB用有的功能。

   编写三个实现类：UDisk(U盘类) 、UFan(USB风扇)、UMouse(USB鼠标)，分别实现USBInterface。并各自实现自己的功能。

   然后对各个实现类的对象，进行方法测试。

2. 定义一个乐器(Instrument)接口，其中有抽象方法 void play();定义一个类实现上述接口。写一个测试类，在测试类中定义一个方法void playInstrument(Instrument ins)，并用测试类中的main方法调用这个方法来测试乐器是否可以正常工作。

3. 给女神写一封情书。
   情书内容包括：
   1、称谓
   2、问候
   3、内容
   4、祝福
   5、落款

   ```
   要求：
   1、定义情书接口 LoveLetter
       比如：String writeTitle(); //书写称谓。 返回值为具体称谓 
             String writeHello();  //书写问候
             String writeBody();  //书写内容
             ....
   2、 编写情书实现类
       LoverLetterImpl
   3、 编写测试类运行
   ```

4. 抽象类、接口、继承、final综合运用：设计一个系统，xxx门的实现过程。

   ```
   思路：
       1、所有的Door都应该有openDoor和closeDoor的功能，所以可以定义一个接口Door，拥有开门和关门的抽象方法。
       2、设计一个抽象类表示防盗的门，增加防盗的抽象方法theftproof();  设计一个抽象类表示防水的门，增加防水的抽象方法waterproof()...
          这些抽象应该实现接口Door
       3、设计具体厂家的防盗门，防水门。每个门都有一个厂家的标志(不可修改)。每个厂家也可以给自己的门增加新的功能。
       4、写测试类测试上述实现。aaa
   ```
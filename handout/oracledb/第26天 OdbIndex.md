# Oracle数据库原理、安装/卸载、sqlplus的使用，DML简单查询

## 26.1：数据库简介（1课时）

### 26.1.1 文件存储

1. 数据以“文件”形式可长期保存在外部存储器的磁盘上。由于计算机的应用转向信息管理，因此对文件要进行大量的查询、修改和插入等操作。
2. 数据的逻辑结构与物理结构有了区别，程序和数据分离，使数据与程序有了一定的独立性，但比较简单。数据的逻辑结构是指呈现在用户面前的数据结构形式。数据的物理结构是指数据在数据在计算机存储设备上的实际存储结构。程度与数据之间具有“设备独立性”，即程序只需用文件名就可与数据打交道，不必关心数据的物理位置。由操作系统的文件系统提供存取方法（读/写）。
3. 文件组织已多样化。有索引文件、链接文件和直接存取文件等。但文件之间相互独立、缺乏联系。数据之间的联系需要通过程序去构造。
4. 数据不再属于某个特定的程序，可以重复使用，即数据面向应用。但是文件结构的设计仍是基于特定的用途，程序基于特定的物理结构和存取方法，因此程度与数据结构之间的依赖关系并未根本改变。
5. 用户的程序与数据可分别存放在外存储器上，各个应用程序可以共享一组数据，实现了以文件为单位的数据共享文件系统。
6. 对数据的操作以记录为单位。这是由于文件中只存储数据，不存储文件记录的结构描述信息。文件的建立、存取、查询、插入、删除、修改等操作，都要用程序来实现。
7. 数据处理方式有批处理，也有联机实时处理。

### 26.1.2 DBS（DB和DBMS）

DB(Database的缩写)、DBMS(Database Manager System 的缩写)。两者共同构成了  DBS(Database System)。即：DBS(数据库系统) 包含 DB(数据库) 和 DBMS(数据库管理系统)。

#### 26.1.2.1 DB(数据库)

​	数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。

#### 26.1.2.2 DBMS(数据库管理系统)

​	数据库管理系统(Database Management System)是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS。它对数据库进行统一的管理和控制，以保证数据库的安全性和完整性。用户通过DBMS访问数据库中的数据，数据库管理员也通过dbms进行数据库的维护工作。它可使多个应用程序和用户用不同的方法在同时或不同时刻去建立，修改和询问数据库。大部分DBMS提供数据定义语言DDL（Data Definition Language）和数据操作语言DML（Data Manipulation Language），供用户定义数据库的模式结构与权限约束，实现对数据的追加、删除等操作。

简单的说：数据库管理系统是数据库系统的核心，是管理数据库的软件。常见的数据管理系统软件有：Oracle、MySql、Sql Server、SYBASE、informix、DB2等。

1. 数据定义：DBMS提供数据定义语言DDL（Data Definition Language），供用户定义数据库的三级模式结构、两级映像以及完整性约束和保密限制等约束。DDL主要用于建立、修改数据库的库结构。DDL所描述的库结构仅仅给出了数据库的框架，数据库的框架信息被存放在数据字典（Data Dictionary）中。
2. 数据操作：DBMS提供数据操作语言DML（Data Manipulation Language），供用户实现对数据的追加、删除、更新、查询等操作。
3. 数据库的运行管理：数据库的运行管理功能是DBMS的运行控制、管理功能，包括多用户环境下的并发控制、安全性检查和存取限制控制、完整性检查和执行、运行日志的组织管理、事务的管理和自动恢复，即保证事务的原子性。这些功能保证了数据库系统的正常运行。
4. 数据组织、存储与管理：DBMS要分类组织、存储和管理各种数据，包括数据字典、用户数据、存取路径等，需确定以何种文件结构和存取方式在存储级上组织这些数据，如何实现数据之间的联系。数据组织和存储的基本目标是提高存储空间利用率，选择合适的存取方法提高存取效率。
5. 数据库的保护：数据库中的数据是信息社会的战略资源，所以数据的保护至关重要。DBMS对数据库的保护通过4个方面来实现：数据库的恢复、数据库的并发控制、数据库的完整性控制、数据库安全性控制。DBMS的其他保护功能还有系统缓冲区的管理以及数据存储的某些自适应调节机制等。
6. 数据库的维护：这一部分包括数据库的数据载入、转换、转储、数据库的重组合重构以及性能监控等功能，这些功能分别由各个使用程序来完成。
7. 通信：DBMS具有与操作系统的联机处理、分时系统及远程作业输入的相关接口，负责处理数据的传送。对网络环境下的数据库系统，还应该包括DBMS与网络中其他软件系统的通信功能以及数据库之间的互操作功能。

### 26.1.3 关系型数据库简介

​	关系数据库，是建立在关系数据库模型基础上的数据库，借助于集合代数等概念和方法来处理数据库中的数据，同时也是一个被组织成一组拥有正式描述性的表格，该形式的表格作用的实质是装载着数据项的特殊收集体，这些表格中的数据能以许多不同的方式被存取或重新召集而不需要重新组织数据库表格。关系数据库的定义造成元数据的一张表格或造成表格、列、范围和约束的正式描述。每个表格（有时被称为一个关系）包含用列表示的一个或更多的数据种类。 每行包含一个唯一的数据实体，这些数据是被列定义的种类。当创造一个关系数据库的时候，你能定义数据列的可能值的范围和可能应用于那个数据值的进一步约束。而SQL语言是标准用户和应用程序到关系数据库的接口。其优势是容易扩充，且在最初的数据库创造之后，一个新的数据种类能被添加而不需要修改所有的现有应用软件。主流的关系数据库有oracle、db2、sqlserver、sybase、mysql 等。

1. 单一的数据结构----关系（表文件）。关系数据库的表采用二维表格来存储数据，是一种按行与列排列的具有相关信息的逻辑组，它类似于Excle工作表。一个数据库可以包含任意多个数据表。如：课程表

   > 在用户看来，一个关系模型的逻辑结构是一张二维表，由行和列组成。这个二维表就叫关系，通俗地说，一个关系对应一张表。

2. 属性（字段）。数据表中的每一列称为一个字段，表是由其包含的各种字段定义的，每个字段描述了它所含有的数据的意义，数据表的设计实际上就是对字段的设计。创建数据表时，为每个字段分配一个数据类型，定义它们的数据长度和其他属性。字段可以包含各种字符、数字、甚至图形。如：课程号，课程名称、学分、任课老师等...

3. 元组（记录）。表中的一行即为一个元组，或称为一条记录。如：课程号(108)    课程名称("数学")等

4. 属性值。行和列的交叉位置表示某个属性值。如：学分(5) 

5. 主码。主码（也称主键或主关键字），是表中用于唯一确定一个元组的数据。关键字用来确保表中记录的唯一性，可以是一个字段或多个字段，常用作一个表的索引字段。每条记录的关键字都是不同的，因而可以唯一地标识一个记录，关键字也称为主关键字，或简称主键。如：课程号(108)

6. 域。属性的取值范围。如：学分(int)

7. 关系模式。关系的描述称为关系模式。对关系的描述，一般表示为：关系名（属性1，属性2.....属性n）。例如上面的关系可描述为：课程(课程号、课程名称、学分、任课老师)。

**关系模型的这种简单的数据结构能够表达丰富的语义，描述出现实世界的实体以及实体间的各种关系。**

### 26.1.4 表(数据表)的概念

​	数据表是数据库中一个非常重要的对象，是其他对象的基础。根据信息的分类情况，一个数据库中可能包含若干个数据表。

​	在数据库中可以显示数据库中的所有数据表，创建数据表，修改表的定义等数据表是数据库中一个非常重要的对象，是其他对象的基础。数据表(或称表)是数据库最重要的组成部分之一。数据库只是一个框架，数据表才是其实质内容。如“教学管理系统”中，“教学管理”数据库包含分别围绕特定主题的6个数据表：“教师”表“课 程”表、“成绩”表、“学生”表、“班级”表和 “授课”表，用来管理教学过程中学生、教师、课程等信息。这些各自独立的数据表通过建立关系被联接起来，成为可以交叉查阅、一目了然的数据库。

## 26.2 认识 Oracle 

### 26.2.1Oracle简介：

Oracle 公司是世界上最大的软件提供商之一，与它并列的还有Microsoft与Adobe。并且随着Oracle的发展，他已经成为了企业办公平台的最大软件提供商之一，

Oracle的中文含义是甲骨文，在古希腊神话之中被翻译为“神谕”、上帝的宠儿。实际上Oracle公司的起源来自于最早的IBM一个分析人员的论文——《论关系型数据库的发展》。

于是Oracle公司的创始人开始开发自己的数据库软件，而这个数据库软件就是后来的Oracle数据库软件。

了解 Oracle 公司创始人

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/70652849-file_1489059886451_57be.png)

> 这张拍摄于1978年的照片，对于大众而言是少数能帮助我们了解甲骨文公司在起步阶段情况的历史资料。
>
> 拍摄这张照片的时候，公司甚至还不叫甲骨文Oracle。

**左起为Ed Oates，Bruce Scott，Bob Miner，Larry Ellison（高个不戴眼镜）**

#### Ed Oates, 当时的项目经理

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/21545491-file_1489060275806_89fa.png)

​	1996年ED Oates从Oracle公司退休，虽然之前他表达过当公司拥有10000名员工时就会退休的意愿，但显然当时oracle的扩展速度过于迅速了，

​	这导致Ed退休的时候Oracle已经拥有20000明员工了。

​	后来他买了一家高端家庭影院专卖店，为像乔布斯和Larry Ellison这样的人提供高端音响，在1999年他出售了这家店。

 	在oracle的最初岁月，Ed Oates负责项目管理

#### Bruce Scott, 第一位雇员

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/50320250-file_1489060194297_16e90.png)

​	Bruce scott对中国用户来说更为熟悉，显然是因为scott/tiger的组合，每一家公司都有一个叫scott的人。

​	虽然大多数人以为Bruce scott是甲骨文的联合创始人，但实际的情况是scott只是Oracle的第一位雇员。如果算上创始人也算employee 雇员的话，那么Scott是第四位雇员。

​	Scott是Oracle数据库前三个版本(2、3、4，没有Version 1)的主要设计人员之一。

​	Scott在1982年离开了oracle，帮助另一位Oracle前员工成立另一家公司Centura Software。之后他参与创始了另一家数据库公司 PointBase， PointBase 被 DataMirror收购了，而DataMirror又被IBM收购。 

#### Bob Miner, 技术天才

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/92847992-file_1489060331461_349e.png)

​	Bob Miner是oracle数据库的主设计师，他在公司的大部分职业生涯都花在产品设计和开发上了。

​	如果说Larry是甲骨文的有冲劲的大脑，那么Miner是甲骨文心脏。他是受人爱戴的高管，其到了平衡Larry对公司影响的作用。他希望员工能不因为通宵工作，而忽略了家人。

 	1993年他由于一种罕见的肺癌去世，享年52岁。

#### Larry Ellison, 有冲劲的商业天才

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/80469399-file_1489060379835_69fb.png)

​	担当了37年的CEO后70岁的Larry在最近宣布主动卸任CEO，将在今后担任CTO的角色。其保持着担任科级公司最长时间CEO的历史记录。

​	他是世界上最富有的人之一，达到 $51 billion。

​	在过去的几年里他把注意力转到其他事情上，如购买了大量的夏威夷小岛拉奈，将该岛屿改造成生态友好的乐园和度假者的天堂。

### 26.2.2 Oracle 操作版本介绍

* Oracle8i  (大小 1CD大约670M )； “i”表示是 internet，表示Oracle开始进军网络；
* Oracle9i（大小 3CD）；属于Oracle8i的稳定版本，现在依然大范围使用。
* Oracle10g（大小630M 已经不是CD光盘时代）；“g”指grid网格的意思。该该本使用了网格计算的方式，主要是提升了数据库的分布的访问性能。网格计算是一种更快的计算方式。
* Oracle11g（大小1.7G ）；属于 Oracle10g的稳定版本，现在新项目使用的基本都是该版本。（本课程使用该版本教学）
* Oracle12c （大小 2.7G）；“c”指cloud 云的意思。最新版本，对云服务的支持。初学者不建议使用该版本。安装配置相对复杂。

### 26.2.1 Oracle11g 的安装与卸载

#### 26.2.1.1Oracle的安装

安装前准备：

* 关闭本机的防火墙，杀毒软件等，尤其是360；
* 如果有可能尽可能断开互联网。

##### 26.2.1.1.1下载

下载地址：http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win64soft-094461.html

需要下载两个文件，同时解压两个文件到同一个目录中。

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/51859779-file_1489061650112_17c69.png)

##### 26.2.1.1.2 安装

![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/22932287-file_1489061680470_17cb5.png)

1. 安装：双击”setup.exe”，软件会加载并初步校验系统是否可以达到了数据库安装的最低配置，检查监视器参数，如果达到要求，就会直接加载程序并进行下一步的安装；（根据电脑的配置不同，这个界面之后可能会卡一会儿）

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-7/14040680-file_1488889929447_15c0c.png)

2. 耐心等等该界面的出现。正在加载...

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/26450709-file_1489064319640_10324.png)

3. 如果有提示电脑配置不够也继续安装

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/56842167-file_1489064336059_1109c.png)

4. 配置安全更新：在出现的“配置安全更新”窗口中，取消“我希望通过My Oracle Support接受安全更新”，单击“下一步”：注：电子邮件（可选）我希望通过My Oracle Support接收安全更新（W）（可选）一般情况下，这两项不必要勾选。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/13461401-file_1489064370891_d799.png)

5. 如果电子邮件没有输入：则提示直接点击—>【是(Y)】

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/94213563-file_1489064611290_144e.png)

6. 注：【创建和配置数据库】（C）安装数据库软件并创建一个数据库实例（初学者）

   ​	【仅安装数据库软件】（D）安装数据库软件，不会创建数据库实例（非初学者）

   ​	【升级现有的数据库】（U）升级低版本的Oracle数据库

   我们现在需要创建和配置数据库，所以选择【创建和配置数据库】，继续下一步；

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/79334529-file_1489064671734_103ca.png)

7. 系统类：默认为“桌面类”；如果是安装在服务器上，选择“服务器类”，如Windows Server系列，Ubuntu Serve等。服务器类可以设置高级选项。这里我们选择【服务器类】，下一步；![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/74043905-file_1489064863731_74c.png)

8. Real Application Clusters 数据库 是Oracle比较高级的话题了。简称 RAC，数据库集群。就是多台机器(数据库)都在工作。也叫分布式数据库管理。这里是Oracle管理部分，相对麻烦。我们现在是开发部分，所以我们选择 【单实例数据库安装】。然后继续下一步：

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/5789938-file_1489065033250_12119.png)

9. 为了能够方便进行我们的配置，所以安装的时候尽量选择【高级安装】；然后下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/32631176-file_1489065424875_cfba.png)

10. 支持语言不用说了，默认简体中文、英语即可。然后下一步

 ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/66758725-file_1489065650665_9db7.png)

11. 版本选择【企业版本】，这里的东西功能是最全的。然后再点下一步。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/57719596-file_1489065723697_1b1b.png)

12. 选择Oracle的基目录。软件位置会跟随基本目录自动分配，默认就好。然后下一步。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/70842696-file_1489066122403_29a5.png)

13. 这里选择【一般用途/事务处理】，然后下一步（此处可能会卡顿一下）

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/31802428-file_1489066214819_15000.png)

14. 将数据库名称定义为 yztc。之前选择创建新的数据库，这个就是我们要创建的新数据库的名称。然后下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/48648170-file_1489066467800_90ba.png)

15. 将【字符集】设置为 UTF-8编码。如果此处设置的不是UTF-8编码，则等到开发的时候就有可能出现中文乱码的问题。如果安装错了也没关系，大不了先不存中文先。  然后选择【示例方案】

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/68764636-file_1489066607411_2a93.png)

16. 在【示例方案】页面把【创建具有示例方案的数据库】打钩。这个钩一定要打上，后面测试语句的时候需要用到，否则就无法练习测试语句。然后选择下一步。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/15783182-file_1489066792851_d531.png)

17. 默认即可，不用管它，直接下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/90784129-file_1489066974392_6373.png)

18. 默认即可，不用管它，直接下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/81995712-file_1489067008814_14fba.png)

19. 这里也默认，不用管它，直接下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/59212612-file_1489067054234_4f4c.png)

20. 这里注意！！！Oracle 对于管理员口令有建议的标准，如果密码不满足标准它会做相应的提示。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/21766130-file_1489067298305_1d35.png)

   虽然点击确定也可以继续使用不标准的口令。为了规范，也为了方便管理，我建议完美所有的用户名的密码都统一设置为【Oracle11gadmin】。然后继续下一步

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/60859601-file_1489067620924_cc05.png)

21. 注意！！！在此之前会先执行条件检查，如果有出现检查出现错误提示，则直接忽略即可。然后直接点击完成开始安装Oracle产品。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/28998267-file_1489067669579_ad6.png)

22. 正常安装流程

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/80568958-file_1489067817308_92f3.png)

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/96610650-file_1489067837433_16a74.png)

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/27350151-file_1489067920776_4619.png)

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/25780898-file_1489067935924_3206.png)

   此过程会比较慢，快则10分钟左右，慢则30分钟左右。请耐心等待。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/718077-file_1489067956024_122e7.png)

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/12427805-file_1489068061426_15fcb.png)

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/78660205-file_1489068087296_25.png)

23. 安装完成，会生成以下界面。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/34093966-file_1489069198147_14c0d.png)

   本次安装是自动实现数据库的创建，每个数据库都需要进行一些额外的配置。这里选择【口令管理】。

   ​

随后进入口令管理程序，主要操作(设置)以下几个用户：

*  超级管理员：sys ，密码设置为：change_on_install；
* 普通管理员：system ，密码设置为：manager；
   * 普通用户：scott ，密码设置为：tiger；(scott创始人有一只猫，猫名字叫tiger)（需要解锁）
   * 大数据用户(用本数据库才有)：sh ，密码设置为：sh；（需要解锁）

   **注意！！！以上设置都是普遍习惯性的密码设置，而实际生产环境我们的密码肯定不是这些习惯密码。为了方便以后的学习，也以防忘记密码，我们统一用这些习惯性密码来设置。**

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/61238026-file_1489069783969_525b.png)

   设置完成后直接点【确定】

   这里会提示密码设置的不标准，是否继续？选择【是】

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/15522943-file_1489069915462_e438.png)

24. 最后数据库配置完成后，再点击【确定】

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/99056283-file_1489069998545_5e69.png)

25. 于是，到这里 Oracle 数据库软件已经安装完成，我们的数据也创建配置完成！直接点击【关闭】，完成数据库产品的安装！！！

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/46550508-file_1489070082972_10339.png)

   ​

26. 那么此时数据库可以说是安装完成了。但是，安装完成之后，Oracle 软件系统会在Windows系统服务中自动启动一些服务。

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-9/67728614-file_1489070374752_ad6d.png)

   ​	Oracle的相关服务有的会设置为[自动启动]，这样会导致Windows电脑启动速度变慢。这里建议把所有的Oracle的[自动自动]服务全部改成[手动]模式。

   ​	但是，有两个服务比较特殊：

   1. OracleOraDb11g_home1TNSListener ：是监听服务，如果要通过程序或者不同的客户端连接Oracle数据库的时候，此服务必须启动，否则无法连接。**为了以后的方便，所以该服务建议自动启动。**
   2. OracleServiceYZTC：数据库的实例服务，他的命名标准是OracleService+SID(服务标识符)的名字，在默认情况下，SID默认和数据库的名字完全一致的。每当为Oracle 增加一个数据库的时候，都会自动出现一个OracleServiceXXX类似的服务名称。**所有的数据都保存在实例服务中。所以建议该服务也自动启动。**

      3. 最后再次提醒：

      4. 如果要通过程序连接数据库，就必须启动监听服务
         2. 所有的数据都保存在实例服务中。

#### 26.2.1.2 完全卸载 Oracle 12

1. 关闭oracle所有的服务。可以在windows的服务管理器中关闭；
2. 打开注册表：regedit 打开路径：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\  删除该路径下的所有以oracle开始的服务名称，这个键是标识Oracle在windows下注册的各种服务！
3. 打开注册表，找到路径：HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE  删除该oracle目录，该目录下注册着Oracle数据库的软件安装信息。
4. 删除注册的oracle事件日志，打开注册表HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application  删除注册表的以oracle开头的所有项目。
5. 删除环境变量path中关于oracle的内容。
6. 鼠标右键右单击“我的电脑>属性>高级>环境变量 PATH 变量。删除Oracle在该值中的内容。
   1. 注意:path中记录着一堆操作系统的目录，在windows中各个目录之间使用分号（; ）隔开的，删除时注意。
   2. 建议：删除PATH环境变量中关于Oracle的值时，将该值全部拷贝到文本器中，找到对应的Oracle的值，删除后，再拷贝修改的串，粘贴到PATH环境变量中，这样相对而言比较安全。
7. 重新启动操作系统。以上1~5个步骤操作完毕后，重新启动操作系统。
8. 重启操作系统后各种Oracle相关的进程都不会加载了。这时删除Oracle_Home下的所有数据。（Oracle_Home指Oracle程序的安装目录）
9. 删除C:\Program Files下oracle目录。
10. 删除C:\Program Data下oracle目录。(该目录一般隐藏)（该目录视Oracle安装所在路径而定）
11. 删除开始菜单下oracle项，如：C:\Documents and Settings\All Users\「开始」菜单\程序\Oracle - Ora10g。
12. 最后在 命令行输入 lusrmgr.msc 进入用户/组 管理界面。删掉Oracle创建的用户。
13. 大功告成！！！！

## 26.3 SQL概述

### 26.3.1 结构化查询语言(Structured Query Language) 即 S-Q-L 发音

**高度概括：**结构化查询语言(Structured Query Language)简称SQL,是一种特殊目的的编程语言，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统；同时也是数据库脚本文件的扩展名。

1. SQL的发展：
   1. 在70年代末的时候，世界上就已经存在***七八十***种数据库，而每一种数据库都有属于自己的一套数据库操作命令。这样就显得让开发者从A数据库过度到B数据库增加了难度，甚至要重新学习一套新的操作命令。
   2. 就在那个时候，IBM公司开发出了SQL数据库操作命令标准，而Oracle数据库是世界最早支持SQL标准的数据库。从那之后，大多数公司都支持SQL语法，大部分都是在各自原有的操作命令的基础上，再兼容一套SQL语法。知道现在，基本上所有的关系型数据库都支持SQL语法。

### 26.3.2 SQL分类

SQL 分为三种类型：

1. DDL(数据定义语言(Data Definition Language)，开发前的设计)：主要指数据对象的创建（表、用户）；(主要学习的内容)
2. DML(数据操作语言(Data Manipulation Language)，开发中使用部分)：主要指数据库的查询和更新操作；(主要学习的内容)
3. DCL(数据库控制语言(Data Control Language)，系统人员工作)：主要是进行权限管理操作（需要结合用户来观察）。此部分由DBA(数据库管理员)负责。

## 26.4 sqlplus的使用

1. 格式化 sqlplus 命令界面格式：
   1. 设置每行的长度：SET LINESIZE 长度;如：SET LINESIZE 120;一行最多显示120字节。
   2. 设置每列的宽度：COL 列名 FOR A长度；如：COL ename FOR A 12;ename列最多显示宽度为12字节。
   3. 设置每页的条数：SET PAGESIZE 条数;如：SET PAGESIZE 30; 一页显示30条。
2. 切换用户：
   1. CONN 用户名/密码 [AS SYSDBA ];   如果是 sys 用户则一定要加上 AS SYSDBA
3. 调用本机(windows)命令：
   1. HOST 本机命令;  如：HOST cls;清屏



## 26.5 SCOTT用户的所有表的结构：

SCOTT 用户一共有4张数据表，以后讲解 DML 语法都将用到这四张表。所以大家先记住这4张数据表的表结构。

1. 查询用户下的所有数据表

   ```sql
   SELECT * FROM tab;
   ```

2. 查询一个数据表的结构

   ```sql
   DESC 表名;
   ```

### 26.5.1 部门信息表：dept

| 列名     | 类型           | 描述                   |
| ------ | ------------ | -------------------- |
| DEPTNO | NUMBER(2)    | 部门编号；最多由2位数字组成       |
| DNAME  | VARCHAR2(14) | 部门名称；最多由14个字节组成      |
| LOC    | VARCHAR2(13) | 部门所在的位置地址；最多由13个字节组成 |

VARCHAR2的解释。

```sql
1.varchar2把所有字符都占两字节处理(一般情况下)，varchar只对汉字和全角等字符占两字节，数字，英文字符等都是一个字节；
2.VARCHAR2把空串等同于null处理，而varchar仍按照空串处理；
3.VARCHAR2字符要用几个字节存储，要看数据库使用的字符集，
大部分情况下建议使用varchar2类型，可以保证更好的兼容性。
varchar2是oracle提供的独特的数据类型
oracle保证在任何版本中该数据类型向上和向下兼容
但不保证varchar，这是因为varchar是标准sql提供的数据类型
有可能随着sql标准的变化而改变.
varchar是被废弃的类型，oracle目前都推荐使用varchar2
varchar也可以用，但不确保未来的版本是否还支持
```

查看字符所占字节长度：

```sql
select length('你') from dual;
-- length('你')是函数查询的一个语法， 而 from dual; dual是一个虚拟表，做单独函数测试时使用。
```

### 26.5.1 员工(雇员)信息表：emp(employees);（主要学习的表）

| 列名       | 类型           | 描述                          |
| -------- | ------------ | --------------------------- |
| EMPNO    | NUMBER(4)    | 员工编号;由4位数字组成                |
| ENAME    | VARCHAR2(10) | 员工姓名                        |
| JOB      | VARCHAR2(9)  | 员工职位                        |
| MGR      | NUMBER(4)    | 员工领导的编号                     |
| HIREDATE | DATE         | 员工雇佣日期；DATA 包含了日期和时间        |
| SAL      | NUMBER(7,2)  | 基本工资；如：99999.99             |
| COMM     | NUMBER(7,2)  | 佣金(提层)，一般只有销售才有佣金的概念。       |
| DEPTNO   | NUMBER(2)    | 员工所在的部门编号。和 dept表的 DEPTNO对应 |

### 26.5.1 工资等级表：salgrade（Salary Grade）

| 列名    | 类型     | 描述       |
| ----- | ------ | -------- |
| GRADE | NUMBER | 工资等级编号   |
| LOSAL | NUMBER | 该等级的最低工资 |
| HISAL | NUMBER | 该等级的最高工资 |

### 26.5.1 工资表：bonus

| 列名    | 类型           | 描述   |
| ----- | ------------ | ---- |
| ENAME | VARCHAR2(10) | 员工名字 |
| JOB   | VARCHAR2(9)  | 职位   |
| SAL   | NUMBER       | 基本工资 |
| COMM  | NUMBER       | 佣金   |

> 注意：bonus表默认没有数据。

## 26.6 DML

### 26.6.1简单查询

所谓的简单查询，指的是查询一张数据表的所有数据行的内容。语法格式如下：

1. 简单查询语法1：

   ```sql
   SELECT [DISTINCT] * FROM 表名;
   -- 通配符 "*" 指所有列；
   ```

2. 简单查询语法2：

   ```sql
   SELECT [DISTINCT] 列名 [AS] "别名",列名 别名... FROM 表名;
   -- 列名,列名 是需要查询的列；别名 查询结果显示的标题。
   ```

   1. 提示： as 可以省略，
   2. 提示："" 双引号也可以省略，但如果别名有特殊符号，或者是数字开头等，就需要用 "" 双引号 指定。否则语法不能识别。

> 注意：查询语句的执行顺序是；
>
> 1. FROM 表名。先执行的是FROM 子句，通过FROM 确定数据表，即：数据的来源。
> 2. SELECT [DISTINCT] * 。确定数据来源后，选择操作由 SELECT 子句来完成。

#### 示例代码：

> 注意：简单查询不能控制列的个数，只能通过 SELECT 子句来控制列的个数。

1. 查询emp表的所有数据，即所有行和所有列的数据。

   ```sql
   SELECT * FROM emp;
   ```

2. 查询 emp表的员工编号、姓名、职位、薪资

   ```sql
   SELECT empno,ename,job,sal FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/53973878-file_1489905470416_17a70.png)

3. 查询 emp表的员工编号、姓名、职位、薪资。结果标题希望显示的是

   编号、姓名、职位、薪资，则：

   ```sql
    SELECT empno 编号,ename 姓名,job 职位,sal 薪资 FROM emp;  
   ```

![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/72398330-file_1489905740070_14235.png)

1. 查询 emp 表的所有职位信息：

   ```sql
   SELECT job FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/21758026-file_1489905837327_acfe.png)

   - 确实查询除了所有职位信息，但是发现很多数据是重复的，如果只是想知道有哪些职位信息，希望去掉重复的信息，则：

     ```sql
     SELECT DISTINCT job FROM emp;
     ```

     ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/93556269-file_1489905984399_ac86.png)

   - > 注意：如果有多列数据，则 `DISTINCT` 必须要多列数据完全相同才能会起作用。

### 26.6.2 简单查询结果 进行 四则运算

示例代码：

1. 查询 emp表的员工编号、姓名、职位、年薪(薪资*13 + 补贴(300 + 180)\*12)。则：

   ```sql
   SELECT empno 编号,ename 姓名,job 职位,(sal*13 + (300+180)*12) 年薪 FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/87633204-file_1489907257068_a9f6.png)

> 四则运算：依然采用的是  先乘除后加减 的操作形式。

### 26.6.3 简单查询结果 常量的使用，以及 连接效果

1. 如果常量是字符串：则需要使用“ ' ”  声明，例如：'hello'  ；

```sql
SELECT '员工',empno,ename FROM emp;
```

![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/12026292-file_1489908473236_11a68.png)

1. 如果常量是数字：则直接编写，如：10086。

   ```sql
   SELECT 10086 AS 移动,empno,ename FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/77845684-file_1489908846126_15118.png)

> 常量：其实就是把它当做一个普通的列来查询，只不过结果都是一样而已！也可以拥有属于自己的别名。

### 26.6.4 查询结果 的 连接效果

再查询的结果中，如果有需要，可以在 SELECT 子句里面 使用 “||” 来连接查询的结果列，如：

1. 将empno与ename 两列数据连接起来。观察连接效果

   ```sql
   SELECT empno||ename FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/74066047-file_1489909154783_4387.png)

   1. 发现两列数据合并成了一列进行显示了。

2. 现在需要查询后的结果显示为如下格式：

   “编号：7369，姓名：SMITH 。”   则，查询语句如下：

   ```sql
   SELECT '编号：'||empno||'，姓名：'||ename||'。' as "员工信息" FROM emp;
   ```

   ![](http://ojx4zwltq.bkt.clouddn.com/17-3-19/6060901-file_1489909727649_9a81.png)

# 作业

1. 掌握Oracle的安装与卸载。
2. 背下SCOTT 用户的emp表 和 dept表 的结构，熟悉salgrade表和bonus表的结构。
3. 查看(熟悉)SCOTT 用户4张数据表的内部数据。
4. 熟悉掌握 sqlplus 的格式化命令。
5. 熟练使用简单查询，熟悉别名的使用。
6. 完成课件上的所有案例。

